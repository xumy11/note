# Springboot针对跨域问题的解决方案

## 方法一：注解

在Spring Boot 中给我们提供了一个注解 `@CrossOrigin` 来实现跨域，这个注解可以实现方法级别的细粒度的跨域控制。我们可以在类或者方添加该注解，如果在类上添加该注解，该类下的所有接口都可以通过跨域访问，如果在方法上添加注解，那么仅仅只限于加注解的方法可以访问。

```java
    @RestController
    @RequestMapping("/user")
    @CrossOrigin
    public class UserController {
       @Autowired
        private UserService userService;

       @RequestMapping("/findAll")
        public Object findAll(){
            return userService.list();
        }
    }

```

## 方法二：实现WebMvcConfigurer

这里可以通过实现 `WebMvcConfigurer` 接口中的 `addCorsMappings()` 方法来实现跨域。

```java
    @Configuration
    public class WebConfig implements WebMvcConfigurer {

        /**
         * 跨域支持
         * @param registry
         */
        @Override
        public void addCorsMappings(CorsRegistry registry) {
            registry.addMapping("/**")  // 配置可以被跨域的路径
                    .allowedOrigins("*")  // 允许所有的请求域名访问我们的跨域资源，可以固定单条或者多条内容
                    .allowCredentials(true)  // 响应头表示是否可以将对请求的响应暴露给页面。返回true则可以，其他值均不可以
                    .allowedMethods("GET", "POST", "DELETE", "PUT")  // 允许输入参数的请求方法访问该跨域资源服务器，如：POST、GET、PUT、OPTIONS、DELETE等。
                    .allowedHeaders(*)  // 允许所有的请求header访问，可以自定义设置任意请求头信息，如："X-YAUTH-TOKEN"
                    .maxAge(3600 * 24);  // 配置客户端缓存预检请求的响应的时间（以秒为单位）。默认设置为1800秒（30分钟）。
        }
    }
```

## 方法三：Nginx 配置解决跨域问题

```java
  location / {
       add_header Access-Control-Allow-Origin *;
       add_header Access-Control-Allow-Headers X-Requested-With;
       add_header Access-Control-Allow-Methods GET,POST,PUT,DELETE,OPTIONS;

       if ($request_method = 'OPTIONS') {
         return 204;
       }
    }
```

